<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XHR</title>
  </head>
  <body>
    <h2>User</h2>
    Name: <span id="name"></span>

    <div>
      <form id="form">
        <input id="input-value" type="text" placeholder="User id" />
        <button>Load data</button>
      </form>
    </div>

    <script>
      var xhr = new XMLHttpRequest()

      function getData (userId) {
        xhr.open('GET', 'https://jsonplaceholder.typicode.com/users/' + userId)
        // xhr.open('GET', 'http://localhost:3000/users/1')
        xhr.send()

        xhr.onload = function () {
          if (xhr.status >= 400) {
            if (xhr.status === 404) {
              alert('User not found')
            } else {
              alert('There is a problem, Please contact with admin.')
            }
          }

          var data = JSON.parse(xhr.response)
          document.querySelector('#name').textContent = data.name
        }
      }

      var input = document.getElementById('input-value')

      document
        .querySelector('#form')
        .addEventListener('submit', function (event) {
          event.preventDefault()

          var value = parseInt(input.value)

          if (value) {
            getData(value)
          } else {
            alert('Please enter a valid id.')
          }

          input.value = ''
        })
    </script>
  </body>
</html>
